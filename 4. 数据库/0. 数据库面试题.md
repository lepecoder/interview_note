## MySQL锁

**按锁的粒度**

1. 行锁：锁一行数据，粒度最小，并发度最高。
2. 表锁：锁一张表，粒度最大，并发度低。
3. 间隙锁：锁一个区间。
4. 共享锁：读锁，其它事务可以读，不能写。
5. 排它锁：写锁，其他事务不能读，也不能写。
6. 乐观锁：并不会真正的锁，而是通过版本号实现。
7. 悲观锁：真的会锁，比如上面的表锁、行锁。

## 索引覆盖

SQL 在执行时会利用索引来快速查找，如果SQL要查询的字段在索引中已经包含了，那就不需要回表，这就叫索引覆盖。

## 最左前缀原则

假设我们有a,b,c字段组成的联合索引，那么为了使用这个联合索引，我们的SQL查找条件里一定要包含联合索引的最左前缀。

## Innodb如何实现事务

1. Innodb收到一个update语句后，找到需要更新的页，放到buffer pool中
2. 执行update语句，修改buffer pool中的数据
3. 针对update语句生成一个RedoLog对象，存入LogBuffer中。