# 字符编码和字符集

> **字符集**是很多个字符的集合，规定每个符号的二进制值，**字符编码**是字符集的一种实现方式，把字符集中的字符映射为特定的字节或字节序列，它是一种规则。
>

通常说的ASCII是字符编码，它包括的字符集是英文字母和常用符号，共有128个，称为ASCII字符集。

Unicode是国际标准字符集，包括一百多万个字符，他记录了每个字符独一无二的二进制数值。

UTF-8、UTF-16、UTF-32是字符编码，在Unicode字符集里编码范围是 0x0000 - 0x10FFFF，因此需要 1 到 3 个字节来表示。

那么，对于三个字节的Unicode字符，计算机怎么知道它表示的是一个字符而不是三个字符呢 ？

如果所有字符都用三个字节表示，那么对于那些一个字节就能表示的字符来说，有两个字节是无意义的，对于存储来说，这是极大的浪费，假如 , 一个普通的文本, 大部分字符都只需一个字节就能表示，现在如果需要三个字节才能表示，文本的大小会大出三倍左右。

UTF-8、UTF-16、UTF-32 中的 "UTF" 是 "Unicode Transformation Format" 的缩写，意思是"Unicode 转换格式"，后面的数 字表明至少使用多少个比特位来存储字符, 比如：UTF-8 最少需要8个比特位也就是一个字节来存储，对应的， UTF-16 和 UTF-32 分别需要最少 2 个字节 和 4 个字节来存储

UTF-8: 是一种变长字符编码，被定义为将码点编码为 1 至 4 个字节，具体取决于码点数值中有效二进制位的数量。

## UTF-8 的编码规则:

0. 对于单字节的符号，字节的第一位设为 0，后面 7 位为这个符号的 Unicode 码。因此对于英语字母，UTF-8 编码和 ASCII 码是相同的, 所以 UTF-8 能兼容 ASCII 编码，这也是互联网普遍采用 UTF-8 的原因之一
1. 对于 n 字节的符号（ n > 1），第一个字节的前 n 位都设为 1，第 n + 1 位设为 0，后面字节的前两位一律设为 10 。剩下的没有提及的二进制位，全部为这个符号的 Unicode 码

下表是Unicode编码对应UTF-8需要的字节数量以及编码格式

| Unicode编码范围(16进制) | UTF-8编码方式(二进制)               |
| ----------------------- | ----------------------------------- |
| 000000 - 00007F         | 0xxxxxxx ASCII码                    |
| 000080 - 0007FF         | 110xxxxx 10xxxxxx                   |
| 000800 - 00FFFF         | 1110xxxx 10xxxxxx 10xxxxxx          |
| 01 0000 - 10 FFFF       | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx |

表格中第一列是Unicode编码的范围，第二列是对应UTF-8编码方式，其中红色的二进制 "1" 和 "0" 是固定的前缀, 字母 x 表示可用编码的二进制位

![](http://img.lepecoder.store/20210618145738.png)