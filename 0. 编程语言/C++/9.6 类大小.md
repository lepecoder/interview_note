计算类的大小就是计算类对象的大小，对象的大小和类中的成员变量有关，其中静态成员变量和成员函数属于类中所有对象共有，不占用对象的空间。

类的大小=基类大小+子类中non-static成员变量大小+非虚基类大小，如果有多态性还要考虑vptr(可能不止一个)大小，成员变量需要被字节对齐。

* 有虚表的对象需要存储虚表指针，一个指针4字节，多个虚表需要存储多个指针。
* *每个成员相对于这个结构体变量地址的偏移量正好是该成员类型所占字节的整数倍，且最终占用字节数为成员类型中最大占用字节数的整数倍。*

C++中的成员函数，静态成员不占用类的大小。
类的大小=基类大小+子类中non-static成员变量大小+非虚基类大小，如果有多态性还要考虑vptr(可能不止一个)大小，成员变量需要被字节对齐。

类的大小是指实例化对象的大小，计算原则：

* 遵循结构体的对齐原则。
* 与普通成员变量有关，与成员函数和静态成员无关。即普通成员函数，静态成员函数，静态数据成员，静态常量数据成员均对类的大小无影响。因为静态数据成员被类的对象共享，并不属于哪个具体的对象。
* 虚函数对类的大小有影响，是因为虚函数表指针的影响。
* 虚继承对类的大小有影响，是因为虚基表指针带来的影响。
* 空类的大小是一个特殊情况，空类的大小为 1，当用 new 来创建一个空类的对象时，为了保证不同对象的地址不同，空类也占用存储空间。

1. 空类的大小是1字节
2. 字节对齐
   每个成员相对于这个结构体变量地址的偏移量正好是该成员类型所占字节的整数倍，且最终占用字节数为成员类型中最大占用字节数的整数倍。

```cpp
class A {
    int c;    // 4字节，
    double d; // 8字节 +4
    short b;  // 2字节，
    bool a;   // 1字节 + 3
};  // 24字节
class A {
    bool a;   // 1字节
    short b;  // 2字节，+1
    int c;    // 4字节，
    double d; // 8字节
};  // 16字节
```

3. 如果类中有虚函数，类的大小需要+4字节来存放虚函数表。
4. 如果继承，则子类需要加上基类的大小，子类中重写的虚函数不计算大小。

```
class   A
{
       virtual   void   foo();
       int   i;
       char   c;
};   sizeof(A)   =   12   =   vptｒ   +   sizeof(i)   +   （sizeof(c)   +３）；

class   B   :public   A
{
       void   foo1();
       static   int  haha;
       long      ll;
}   sizeof(B)   =   16   =  sizeof(A)   +   sizeof(ll);
```

5. 虚基类指针：如果是虚继承，则子类的大小为：虚基类的大小 + 4个字节(用来存放指向虚基对象的指针）+子类新增成员的大小。