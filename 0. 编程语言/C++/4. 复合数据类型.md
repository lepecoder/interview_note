### 复合数据类型

#### 数组

数组用来储存多个同类型的值，比如`int arr[10]`，元素的数目在编译时必须是已知的，也就是说可以使`const`或是表达式，但不能是变量，因为数组在声明时就需要分配存储空间。

数组只有在定义时才能初始化，之后只能按下标赋值，不能将一个数组赋给另一个数组。

```cpp
int cards[3] = {1,2,3}
int a[3] = {2}  //其它是0
int b[] = {2,1,1} //数组长度初始化为3
int nums = sizeof(b)/sizeof(int)
```

数组初始化时不能缩窄转换，这意味着：

```cpp
int a = 3.2  //allowed
int b[] = {1,2,3.2} //not allowed
```

动态数组参考["动态数组"](siyuan://blocks/20210317110657-vxze3bn)

##### 二维数组

```cpp
int maxtemps [4][5];
```

maxtemps是包含4个元素的数组，其中每个元素又包含5个int型元素。虽然是二位数组，但他们在内存中却是线性存储的，按行存储。

#### 字符串

##### 数组类型字符串

```
char a[4] = {'a','b','c','\0'}  // 字符串必须以\0结尾
char b[4] = "abc"  //或者用双引号，由于默认的\0，字符串的长度是
```

无论字符数组有多大，字符串处理时都以\0结束，因此通常将数组设置的比字符串大很多，除了占用内存外并没有什么坏处。

cin是面向单词的输入，遇到空格会断开，要读取一行可以使用

#### string类型字符串

C++98 标准的一种新的字符串类型，头文件是\<string>，不需要再用数组存储字符串，string类让我们可以像操作普通对象一样使用字符串，也不需要手动设计数组大小，string会自动处理对象的size。

#### 枚举类型

enum是C++中的一种派生数据类型，枚举类型是用户定义的若干常量的集合，枚举变量的值只能是几个常量集合中的一个，编译器会把枚举元素作为整型常量处理，感觉作用不大。比如

```cpp
enum color { red, green, blue } c;
c = blue;
cout << c;
// 输出是2
```

#### 联合体 共用体??

共用体感觉没什么用，它虽然可以存储不同的数据类型，但同时只能存在其一，比如

```cpp
union Data
{
   int i;
   float f;
   char  str[20];
} data;
```

data.i = 10;  此时i存在
data.f = 2.1;  此时i就丢失了
公用体的好处是可以节省内存空间，因为共用体的长度就是最大成员的长度。

#### 结构体?

和C语言的结构体一样，

```cpp
struct inflatable{
    char name[10];
    float volume;
} flat;
```

可以在声明时使用大括号初始化，比如 inflatable duck {'hello', 3.2}，初始化时不允许缩窄转换。

结构体可以认为是用户自定义的数据类型，因此可以作为函数参数或是返回值，同样也可以使用`=`将一个结构体赋值给同类型的另一个变量，也可以创建元素为结构的数组，和普通数组的方法完全一样。

结构体在某种程度上和类有相似的特性。

##### 结构体初始化

可以定义和结构体同名的构造函数

```cpp
struct inflatable{
    char name[10];
    float volume;
    inflatable(char *a, float b){  //构造函数
        name = a;
	volume = b;
    }
    inflatable(char *a, float b):name(a), volume(b){}  //另一种构造函数写法
    inflatable():{}  //无参构造函数 
} ;
// 结构体会有默认的构造函数，因此我们可以直接定义结构体类型
inflatable flat = inflatable('lkajwd',2.3);
// 也可以和数组一样使用列表初始化
inflatable flata = {'alwdj',1,2}; //此时等号是可选的
inflatable fla = {}  //所有成员函数都被初始化为0


```

对于常规的结构体可以先初始化再复制，但如果成员是const或是引用类型，必须在初始化时赋值。