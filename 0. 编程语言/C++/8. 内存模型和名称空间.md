### 多文件编译

在include时，可以包含多次函数声明，但不能包含多次函数定义。对于变量，除非是常量，否则多次include也会出错。可以使用extern声明表示函数是在另一个文件中定义的，但是多个问题必须作为程序的一部分被编译；另外，如果想让程序的链接性变为内部，可以使用`static`关键字。

多文件系统中，每个函数只能有一个定义，但是每个使用该函数的文件都应包含函数声明(原型)。

内联函数要求在每个使用它的文件中都对其定义，因此需要放在头文件中include。

### 防止内存泄露

1. 将内存的分配和释放封装，构造时申请内存，析构时释放内存。

### 存储持续性、作用域和链接性

#### 存储持续性

自动存储持续性：函数中声明的变量，在函数执行时存在。
静态存储持续性：在函数外或使用static定义的变量，在程序的运行过程中存在。
动态存储持续性：使用new delete管理的变量。

#### 作用域

函数中使用的变量在函数体可用。
函数外部定义的变量可在所有函数中使用。

#### 链接性

外部链接性可在所有文件中共享
内部链接性只能在文件内部的函数共享。

### 函数声明

定义声明会为变量分配内存，
引用声明使用`extern`关键字，表示使用外部链接的变量。

### 5种变量存储方式

| 存储描述         | 持续性 | 作用域 | 链接性 | 如何声明                         |
| ---------------- | ------ | ------ | ------ | -------------------------------- |
| 自动             | 自动   | 代码块 | 无     | 在代码块中                       |
| 寄存器           | 自动   | 代码块 | 无     | 在代码块中，使用关键字`register` |
| 静态，无链接性   | 静态   | 代码块 | 无     | 在代码块中，使用关键字`static`   |
| 静态，外部链接性 | 静态   | 文件   | 外部   | 在函数外部                       |
| 静态，内部链接性 | 静态   | 文件   | 内部   | 在函数外部，使用关键字`static`   |

另外，const修饰的全局变量也是内部的

### 说明符和限定符

register：使用寄存器存储，在C++中指明变量是自动的，，，没什么用
static：静态，程序声明周期有效
extern：引用声明
mutable：用在结构体定义，说明即使结构体变量是const常量，这个成员也可以被修改

### 函数的链接性

C++不允许在一个函数中定义另一个函数，因此所有函数的存储持续性都是静态的，也就是在整个程序生命周期都存在。

函数的链接性是外部的，因此可以在文件间共享。

### 名称空间

C++中的名称可以是变量、函数、结构、枚举、类，他们的名称都不能互相冲突，C++提供了名称空间工具，

```cpp
namespace Jack{
  doubele pail;
  void fetch();
  int pal;
  struct Well{...};
}
```

可以手动定义一个新的声明区域，称为命名空间。在使用变量是可以使用Jack::pail，来指定变量属于Jack命名空间。除了每次使用namespace，还可以使用using声明和using编译指令。

using Jill::fetch，将特定的声明添加到所属的声明区域，如果有同名的会出错
using namespace Jack; 编译指令使得Jack空间中的名称全局可用，如果局部空间有同名的，则命名空间中的会被隐藏。